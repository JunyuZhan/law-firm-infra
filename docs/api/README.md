# API文档中心

## 文档结构
```
api/
├── admin/                # 管理端接口文档
│   ├── system/          # 系统管理接口
│   │   ├── auth.md      # 认证授权接口
│   │   ├── user.md      # 用户管理接口
│   │   ├── role.md      # 角色管理接口
│   │   ├── menu.md      # 菜单管理接口
│   │   ├── dept.md      # 部门管理接口
│   │   ├── dict.md      # 字典管理接口
│   │   ├── log.md       # 日志管理接口
│   │   └── notice.md    # 通知公告接口
│   │
│   ├── case/            # 案件管理接口
│   ├── client/          # 客户管理接口
│   ├── contract/        # 合同管理接口
│   ├── document/        # 文档管理接口
│   ├── finance/         # 财务管理接口
│   ├── personnel/       # 人事管理接口
│   ├── knowledge/       # 知识管理接口
│   └── workflow/        # 工作流管理接口
│
├── lawyer/              # 律师端接口文档
│   ├── case/           # 案件管理接口
│   ├── client/         # 客户管理接口
│   ├── schedule/       # 日程管理接口
│   └── document/       # 文档管理接口
│
├── client/             # 客户端接口文档
│   ├── auth/          # 认证授权接口
│   ├── case/          # 案件查询接口
│   └── service/       # 服务管理接口
│
└── mobile/             # 移动端接口文档
    ├── auth/          # 认证授权接口
    ├── message/       # 消息管理接口
    └── profile/       # 个人中心接口
```

## 接口规范

### 1. 基础规范
- 基础路径: `/api`
- 请求方法: GET、POST、PUT、DELETE
- 内容类型: application/json
- 字符编码: UTF-8

### 2. 请求头
```http
Authorization: Bearer {token}    # JWT认证令牌
Content-Type: application/json   # 请求内容类型
Accept: application/json        # 响应内容类型
X-Tenant-Id: {tenantId}        # 租户ID
```

### 3. 统一响应格式
```json
{
    "code": 200,               // 状态码
    "message": "success",      // 提示信息
    "data": {                  // 响应数据
        // 具体数据结构
    },
    "success": true           // 成功标志
}
```

### 4. 分页请求参数
```json
{
    "pageNum": 1,             // 当前页码
    "pageSize": 10,           // 每页条数
    "keyword": "",            // 关键字搜索
    "sortField": "",          // 排序字段
    "sortOrder": ""           // 排序方式(ascend/descend)
}
```

### 5. 分页响应格式
```json
{
    "code": 200,
    "message": "success",
    "data": {
        "list": [],           // 数据列表
        "total": 100,         // 总记录数
        "pageNum": 1,         // 当前页码
        "pageSize": 10        // 每页条数
    },
    "success": true
}
```

### 6. 错误码说明
| 错误码 | 说明 | 处理建议 |
|--------|------|----------|
| 200 | 成功 | - |
| 400 | 请求参数错误 | 检查请求参数 |
| 401 | 未认证 | 重新登录 |
| 403 | 无权限 | 申请权限 |
| 404 | 资源不存在 | 检查请求资源 |
| 500 | 服务器错误 | 联系管理员 |

## 开发指南

### 1. 认证流程
1. 调用登录接口获取token
2. 请求头携带token访问其他接口
3. token过期使用refresh_token刷新

### 2. 权限控制
1. 基于RBAC的权限模型
2. 支持角色和权限两种方式
3. 菜单和按钮级别的权限控制

### 3. 数据权限
1. 部门数据权限
2. 个人数据权限
3. 自定义数据权限

### 4. 文件处理
1. 文件上传支持分片上传
2. 文件下载支持断点续传
3. 支持文件在线预览

## 安全说明

### 1. 接口安全
- 统一的认证鉴权
- 防重放攻击
- 防SQL注入
- 防XSS攻击
- 防CSRF攻击

### 2. 数据安全
- 敏感数据加密
- 数据脱敏展示
- 操作日志记录
- 数据访问控制
- 数据备份恢复

## 版本说明

### v1.0.0 (2024-02-09)
- 基础功能接口
- 认证授权接口
- 用户管理接口
- 系统管理接口

### v1.1.0 (开发中)
- 新增消息接口
- 新增统计接口
- 优化认证流程
- 完善接口文档

## 常见问题

### 1. 认证问题
Q: 如何处理token过期？
A: 使用refresh_token获取新的token。

### 2. 接口问题
Q: 如何处理大数据量查询？
A: 使用分页查询，合理设置每页数量。

### 3. 安全问题
Q: 如何防止接口被刷？
A: 使用接口限流和验证码机制。 