-- 财务管理模块说明
-- 版本: V10000
-- 模块: 财务管理模块 (V10000-V10999)
-- 创建时间: 2023-06-01
-- 说明: 财务管理功能模块架构说明

/*
=============================================================================
                            财务管理模块 - 功能说明
=============================================================================

一、模块职责
财务管理模块负责律师事务所的财务核算和资金管理，包括：
- 账户管理
- 交易记录
- 发票管理
- 应收应付管理
- 账单管理
- 收支管理
- 预算管理
- 财务报表
- 费用管理

二、版本规划 (V10000-V10999)
- V10000: 模块说明文档
- V10001: 表结构定义
- V10002: 基础数据初始化

三、核心功能表
=============================================================================
1. 账户管理
   - finance_account: 账户信息
   - finance_account_balance: 账户余额
   - finance_account_operation: 账户操作记录

2. 交易管理
   - finance_transaction: 交易记录
   - finance_transaction_detail: 交易明细
   - finance_voucher: 财务凭证

3. 发票管理
   - finance_invoice: 发票信息
   - finance_invoice_item: 发票明细
   - finance_invoice_log: 发票操作日志

4. 应收应付管理
   - finance_receivable: 应收账款
   - finance_receivable_detail: 应收明细
   - finance_payable: 应付账款
   - finance_payable_detail: 应付明细

5. 账单管理
   - finance_bill: 账单信息
   - finance_bill_item: 账单明细
   - finance_payment_plan: 付款计划

6. 收支管理
   - finance_income: 收入记录
   - finance_expense: 支出记录
   - finance_cost_center: 成本中心

7. 预算管理
   - finance_budget: 预算计划
   - finance_budget_item: 预算明细
   - finance_budget_execution: 预算执行

8. 财务报表
   - finance_report: 财务报表
   - finance_report_data: 报表数据
   - finance_statement: 财务报表

四、数据关系
=============================================================================
- finance_account → finance_account_balance (账户余额)
- finance_account → finance_account_operation (账户操作)
- finance_transaction → finance_transaction_detail (交易明细)
- finance_transaction → finance_voucher (财务凭证)
- finance_invoice → finance_invoice_item (发票明细)
- finance_invoice → finance_invoice_log (发票日志)
- finance_receivable → finance_receivable_detail (应收明细)
- finance_payable → finance_payable_detail (应付明细)
- finance_bill → finance_bill_item (账单明细)
- finance_bill → finance_payment_plan (付款计划)
- finance_budget → finance_budget_item (预算明细)
- finance_budget → finance_budget_execution (预算执行)
- finance_report → finance_report_data (报表数据)

五、业务特点
=============================================================================
1. 账户管理
   - 多币种账户支持
   - 账户余额实时更新
   - 账户冻结和解冻
   - 账户操作审计

2. 交易控制
   - 交易流水记录
   - 交易状态跟踪
   - 交易对账功能
   - 交易撤销和冲正

3. 发票管理
   - 发票开具和作废
   - 发票状态跟踪
   - 发票寄送管理
   - 发票验真功能

4. 应收应付
   - 应收账款跟踪
   - 逾期提醒功能
   - 坏账处理机制
   - 催收管理功能

5. 财务报表
   - 实时财务数据
   - 多维度分析
   - 自定义报表
   - 数据导出功能

六、权限设计
=============================================================================
财务管理功能权限控制：
- 财务查看: FINANCE_VIEW
- 财务管理: FINANCE_MANAGE
- 账户管理: ACCOUNT_MANAGE
- 交易管理: TRANSACTION_MANAGE
- 发票管理: INVOICE_MANAGE
- 应收管理: RECEIVABLE_MANAGE
- 应付管理: PAYABLE_MANAGE
- 账单管理: BILL_MANAGE
- 预算管理: BUDGET_MANAGE
- 报表查看: REPORT_VIEW
- 财务审计: FINANCE_AUDIT
- 财务统计: FINANCE_STATISTICS

七、注意事项
=============================================================================
1. 财务数据涉及敏感信息，需严格权限控制
2. 所有财务操作需要完整的审计日志
3. 账户余额变动需要事务控制确保一致性
4. 财务报表数据需要定期校验和对账
5. 支持多币种和汇率转换
6. 需要完善的财务审批流程
7. 支持财务数据的备份和恢复

八、账户编号规则
=============================================================================
账户编号格式：ACCT-类型-YYYY-流水号
- ACCT: 账户(Account)前缀
- 类型: 01-现金, 02-银行, 03-支付宝, 04-微信, 05-其他
- YYYY: 年份
- 流水号: 4位数字，从0001开始

示例：ACCT-02-2023-0001（2023年第1个银行账户）

九、交易编号规则
=============================================================================
交易编号格式：TXN-YYYYMMDD-HHMMSS-流水号
- TXN: 交易(Transaction)前缀
- YYYYMMDD: 交易日期
- HHMMSS: 交易时间
- 流水号: 3位数字，从001开始

示例：TXN-20231201-143022-001

十、发票编号规则
=============================================================================
发票编号格式：INV-发票类型-YYYYMM-流水号
- INV: 发票(Invoice)前缀
- 发票类型: VAT-增值税, ORD-普通, ELE-电子
- YYYYMM: 开票年月
- 流水号: 6位数字，从000001开始

示例：INV-VAT-202312-000001

十一、财务核算原则
=============================================================================
1. 权责发生制原则：
   - 按权责发生制确认收入和费用
   - 收入确认遵循实现原则
   - 费用确认遵循配比原则

2. 成本效益原则：
   - 核算成本不应超过其效益
   - 简化不重要事项的核算
   - 重点关注重要财务指标

3. 谨慎性原则：
   - 稳健估计收入和费用
   - 充分考虑可能的损失
   - 合理计提坏账准备

4. 一致性原则：
   - 财务核算方法保持一致
   - 核算口径前后一致
   - 报表格式标准统一

十二、风险控制
=============================================================================
1. 内控制度：
   - 建立完善的内控制度
   - 实施有效的职责分离
   - 定期进行内部审计

2. 资金安全：
   - 银行账户定期对账
   - 大额资金流动审批
   - 资金使用全程监控

3. 数据安全：
   - 财务数据定期备份
   - 访问权限严格控制
   - 操作日志完整记录

=============================================================================
                              模块版本: 1.0.0
                              最后更新: 2023-06-01
                              维护团队: 财务管理组
=============================================================================
*/

-- 此脚本仅包含说明文档，不执行任何SQL操作
SELECT '财务管理模块说明文档已加载' AS message; 