# 知识管理模块配置

knowledge:
  # 存储配置
  storage:
    base-path: ${user.home}/lawfirm/knowledge
    temp-path: ${user.home}/lawfirm/knowledge/temp
    
  # 文档配置
  document:
    max-size: 10MB
    allowed-extensions: .doc,.docx,.pdf,.md,.txt
    
  # 附件配置
  attachment:
    max-size: 20MB
    max-count-per-knowledge: 10
    allowed-extensions: .doc,.docx,.pdf,.jpg,.png,.zip
    
  # 分类配置
  category:
    max-depth: 3
    
  # 搜索配置
  search:
    enable-highlight: true
    max-result-count: 100
    min-keyword-length: 2
    
  # 权限配置
  permission:
    public-categories: [1, 2, 3]  # 公开分类ID列表
    
  # 统计任务
  statistic:
    cron: "0 0 1 * * ?"  # 每天凌晨1点执行

# 数据库配置
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/law_firm_knowledge?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: password
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      idle-timeout: 30000
      connection-timeout: 30000
      max-lifetime: 1800000
      
  # Flyway配置
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: true
    table: flyway_schema_history_knowledge
    
# MyBatis-Plus配置
mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml
  type-aliases-package: com.lawfirm.model.knowledge.entity
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: false
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# 存储服务配置
storage:
  # MinIO配置
  minio:
    enabled: true
    endpoint: http://minio:9000
    access-key: minioadmin
    secret-key: minioadmin
    bucket: knowledge-documents
    
# 搜索服务配置
search:
  # Elasticsearch配置
  elasticsearch:
    enabled: true
    host: elasticsearch
    port: 9200
    index-prefix: law-firm-
    
# 日志配置
logging:
  level:
    com.lawfirm.knowledge: debug
    com.lawfirm.model.knowledge: debug 