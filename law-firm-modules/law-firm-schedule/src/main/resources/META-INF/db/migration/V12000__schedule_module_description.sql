-- 日程管理模块说明
-- 版本: V12000
-- 模块: 日程管理模块 (V12000-V12999)
-- 创建时间: 2023-06-01
-- 说明: 日程管理功能模块架构说明

/*
=============================================================================
                            日程管理模块 - 功能说明
=============================================================================

一、模块职责
日程管理模块负责律师事务所的日程规划和时间管理，包括：
- 个人日程管理
- 团队协作日程
- 会议室预订管理
- 日程提醒通知
- 外部日历同步
- 法庭出庭安排
- 客户会面预约
- 工作计划制定
- 时间统计分析

二、版本规划 (V12000-V12999)
- V12000: 模块说明文档
- V12001: 表结构定义
- V12002: 基础数据初始化

三、核心功能表
=============================================================================
1. 日程基础管理
   - schedule_schedule: 日程主表
   - schedule_content: 日程内容详情
   - schedule_attachment: 日程附件

2. 日历管理
   - schedule_calendar: 日历管理
   - schedule_calendar_subscription: 日历订阅
   - schedule_calendar_share: 日历分享

3. 参与协作
   - schedule_participant: 日程参与者
   - schedule_invitation: 邀请通知
   - schedule_response: 参与响应

4. 提醒通知
   - schedule_reminder: 日程提醒
   - schedule_notification: 通知记录
   - schedule_alert: 告警管理

5. 会议室管理
   - schedule_meeting_room: 会议室信息
   - schedule_room_booking: 会议室预订
   - schedule_room_equipment: 会议室设备

6. 外部集成
   - schedule_external_calendar: 外部日历
   - schedule_sync_log: 同步日志
   - schedule_calendar_sync: 日历同步

7. 重复规则
   - schedule_recurrence: 重复规则
   - schedule_exception: 例外日期
   - schedule_occurrence: 重复实例

8. 统计分析
   - schedule_statistics: 日程统计
   - schedule_time_analysis: 时间分析
   - schedule_report: 报表数据

四、数据关系
=============================================================================
- schedule_schedule → schedule_content (日程内容)
- schedule_schedule → schedule_attachment (日程附件)
- schedule_schedule → schedule_participant (参与者)
- schedule_schedule → schedule_reminder (提醒设置)
- schedule_schedule → schedule_recurrence (重复规则)
- schedule_calendar → schedule_schedule (日历日程)
- schedule_meeting_room → schedule_room_booking (会议室预订)
- schedule_external_calendar → schedule_sync_log (同步记录)

五、业务特点
=============================================================================
1. 时间管理
   - 全天事件支持
   - 时区处理
   - 工作时间设置
   - 冲突检测

2. 重复规则
   - 灵活的重复模式
   - 例外日期处理
   - 结束条件设置
   - 批量操作支持

3. 协作功能
   - 多人参与
   - 权限控制
   - 状态同步
   - 通知机制

4. 提醒系统
   - 多种提醒方式
   - 提前时间设置
   - 重复提醒
   - 智能推送

5. 会议室管理
   - 资源预订
   - 冲突检测
   - 设备管理
   - 使用统计

六、权限设计
=============================================================================
日程管理功能权限控制：
- 日程查看: SCHEDULE_VIEW
- 日程管理: SCHEDULE_MANAGE
- 日程创建: SCHEDULE_CREATE
- 日程编辑: SCHEDULE_EDIT
- 日程删除: SCHEDULE_DELETE
- 日历管理: CALENDAR_MANAGE
- 会议室管理: MEETING_ROOM_MANAGE
- 会议室预订: MEETING_ROOM_BOOK
- 外部同步: EXTERNAL_SYNC
- 统计查看: SCHEDULE_STATISTICS
- 系统配置: SCHEDULE_CONFIG
- 提醒管理: REMINDER_MANAGE

七、注意事项
=============================================================================
1. 时区处理要统一，避免时间混乱
2. 重复日程的处理要考虑性能优化
3. 会议室冲突检测要实时准确
4. 外部日历同步要保证数据一致性
5. 提醒通知要及时可靠
6. 权限控制要细粒度管理
7. 大量数据的查询要优化索引

八、日程编号规则
=============================================================================
日程编号格式：SCH-类型-YYYY-流水号
- SCH: 日程(Schedule)前缀
- 类型: MTG-会议, TSK-任务, APT-约见, CRT-法庭, EVT-事件
- YYYY: 年份
- 流水号: 4位数字，从0001开始

示例：SCH-MTG-2023-0001（2023年第1个会议日程）

九、日程状态管理
=============================================================================
日程状态流转：
1. 草稿(DRAFT) → 计划中(PLANNED)
2. 计划中(PLANNED) → 进行中(IN_PROGRESS)
3. 进行中(IN_PROGRESS) → 已完成(COMPLETED)
4. 任何状态 → 已取消(CANCELLED)

参与者响应状态：
- 待定(PENDING)
- 接受(ACCEPTED)
- 拒绝(DECLINED)
- 暂定(TENTATIVE)

十、重复规则设计
=============================================================================
重复类型：
- DAILY: 每日重复
- WEEKLY: 每周重复
- MONTHLY: 每月重复
- YEARLY: 每年重复
- CUSTOM: 自定义重复

重复参数：
- 间隔(interval): 重复间隔
- 星期(weekdays): 适用星期
- 月份天数(monthday): 月中第几天
- 月份周次(weekofmonth): 月中第几周
- 结束条件(endtype): 永不结束/次数/日期

十一、会议室管理
=============================================================================
1. 会议室信息
   - 基本信息: 名称、位置、容量
   - 设备配置: 投影仪、视频会议、白板
   - 可用时间: 工作日、时间段
   - 预订规则: 提前时间、最长时间

2. 预订管理
   - 冲突检测
   - 审批流程
   - 使用统计
   - 成本核算

3. 设备管理
   - 设备清单
   - 故障报修
   - 维护记录
   - 使用监控

十二、外部日历集成
=============================================================================
支持的外部平台：
- Google Calendar
- Microsoft Outlook
- Apple iCalendar
- 钉钉日历
- 企业微信日历

同步策略：
- 单向同步: 只导入或只导出
- 双向同步: 保持数据一致
- 定时同步: 设置同步频率
- 实时同步: 变更立即同步

数据映射：
- 时间字段映射
- 状态字段映射
- 参与者映射
- 提醒设置映射

十三、时间统计分析
=============================================================================
1. 个人统计
   - 工作时间分布
   - 会议时间占比
   - 任务完成率
   - 效率分析

2. 团队统计
   - 团队协作度
   - 会议频次
   - 资源使用率
   - 工作负荷

3. 会议室统计
   - 使用率统计
   - 热门时段
   - 成本分析
   - 设备利用率

4. 趋势分析
   - 时间趋势
   - 季节性分析
   - 工作模式
   - 优化建议

十四、通知提醒机制
=============================================================================
1. 提醒类型
   - 系统通知
   - 邮件提醒
   - 短信提醒
   - 微信推送
   - 桌面弹窗

2. 提醒时机
   - 即时提醒
   - 提前提醒
   - 重复提醒
   - 超时提醒

3. 智能推送
   - 根据用户习惯
   - 重要程度判断
   - 免打扰时间
   - 推送频率控制

=============================================================================
                              模块版本: 1.0.0
                              最后更新: 2023-06-01
                              维护团队: 日程管理组
=============================================================================
*/

-- 此脚本仅包含说明文档，不执行任何SQL操作
SELECT '日程管理模块说明文档已加载' AS message; 