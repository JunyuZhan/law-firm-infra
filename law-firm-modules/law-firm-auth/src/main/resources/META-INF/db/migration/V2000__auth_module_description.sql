-- 认证模块说明
-- 版本: V2000
-- 模块: 认证模块 (V2000-V2999)
-- 创建时间: 2023-06-01
-- 说明: 认证功能模块架构说明

/*
=============================================================================
                            认证模块 - 功能说明
=============================================================================

一、模块职责
认证模块负责律师事务所的用户认证和权限管理，包括：
- 用户账户管理
- 角色权限管理
- 登录认证和会话管理
- 权限控制和访问验证
- 用户行为审计
- 密码策略管理
- 多因素认证
- 单点登录(SSO)

二、版本规划 (V2000-V2999)
- V2000: 模块说明文档
- V2001: 表结构定义
- V2002: 基础数据初始化

三、核心功能表
=============================================================================
1. 用户管理
   - auth_user: 用户基本信息
   - auth_login_history: 登录历史记录

2. 权限管理
   - auth_role: 角色定义
   - auth_permission: 权限定义
   - auth_role_permission: 角色权限关联
   - auth_user_role: 用户角色关联

3. 权限申请管理
   - sys_permission_request: 权限申请表
   - sys_team_permission: 团队权限关联

四、数据关系
=============================================================================
- auth_user → auth_user_role → auth_role (用户角色关系)
- auth_role → auth_role_permission → auth_permission (角色权限关系)
- auth_user → auth_login_history (登录历史)
- auth_user → sys_permission_request (权限申请)
- auth_role → sys_team_permission (团队权限)

五、业务特点
=============================================================================
1. 安全性优先
   - 密码加密存储(BCrypt)
   - 登录失败锁定机制
   - 会话安全管理
   - 敏感操作审计

2. 灵活权限控制
   - 基于角色的权限管理(RBAC)
   - 细粒度权限控制
   - 数据权限范围控制
   - 动态权限验证

3. 多租户支持
   - 租户级别权限隔离
   - 跨租户权限管理
   - 租户数据安全

六、权限设计
=============================================================================
认证模块功能权限控制：
- 用户管理: USER_MANAGE
- 角色管理: ROLE_MANAGE
- 权限管理: PERMISSION_MANAGE
- 权限申请审批: PERMISSION_APPROVE
- 登录日志查看: LOGIN_LOG_VIEW
- 用户权限分配: USER_PERMISSION_ASSIGN

七、安全策略
=============================================================================
1. 密码策略
   - 密码复杂度要求
   - 密码定期更换
   - 历史密码验证

2. 登录策略
   - 登录失败锁定
   - 异地登录提醒
   - 并发登录控制

3. 会话策略
   - 会话超时管理
   - 强制下线功能
   - 会话状态监控

八、注意事项
=============================================================================
1. 用户密码严格加密，不可明文存储
2. 权限变更需要实时生效，注意缓存同步
3. 登录日志需要完整记录，便于安全审计
4. 角色权限分配需要审批流程
5. 敏感操作需要二次验证

九、架构说明
=============================================================================
注意：由于历史原因，部分认证相关表已在API层创建：
- auth_user, auth_role, auth_permission等核心表在API层
- 本模块主要负责认证相关的业务逻辑和数据维护
- 后续架构优化时考虑将表结构迁移到认证模块

十、集成说明
=============================================================================
本模块与其他模块的集成：
- 与API层：提供认证接口和权限验证
- 与业务模块：提供用户身份和权限信息
- 与审计模块：记录认证相关的操作日志
- 与通知模块：发送登录异常、密码过期等通知

=============================================================================
                              模块版本: 1.0.0
                              最后更新: 2023-06-01
                              维护团队: 认证安全组
=============================================================================
*/

-- 此脚本仅包含说明文档，不执行任何SQL操作
SELECT '认证模块说明文档已加载' AS message; 