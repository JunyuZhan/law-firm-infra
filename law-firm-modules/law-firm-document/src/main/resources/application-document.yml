spring:
  # 数据源配置
  datasource:
    dynamic:
      datasource:
        document:
          url: ${spring.datasource.master.url}
          username: ${spring.datasource.master.username}
          password: ${spring.datasource.master.password}
          driver-class-name: ${spring.datasource.master.driver-class-name}
  
  # SQL脚本执行配置
  sql:
    init:
      mode: always
      schema-locations: classpath:db/migration/V*.sql
      continue-on-error: true

  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB

# 文档模块配置
document:
  # 存储配置
  storage:
    # 默认存储类型：LOCAL, OSS, S3
    default-type: LOCAL
    # 本地存储路径
    local-path: ${user.home}/lawfirm/document
    # 临时文件存储路径
    temp-path: ${java.io.tmpdir}/document-temp
    # 文件访问基础URL
    base-url: /api/document/file
    # 预览文件访问URL
    preview-url: /api/document/preview
    # 允许的文件类型
    allowed-types: doc,docx,pdf,txt,xls,xlsx,ppt,pptx,jpg,jpeg,png,gif,zip,rar
    # 最大文件大小（字节）
    max-size: 104857600
  
  # 预览配置
  preview:
    # 是否启用水印
    watermark-enabled: true
    # 水印文字
    watermark-text: 预览版本，仅供查看
    # 是否启用转换
    convert-enabled: true
    # 支持预览的文件类型
    supported-types: pdf,doc,docx,xls,xlsx,ppt,pptx,txt,jpg,jpeg,png,gif

  # 版本控制
  version:
    # 是否启用版本控制
    enabled: true
    # 最大保留版本数
    max-count: 10

  # 分享配置
  share:
    # 默认过期时间（小时）
    default-expire-hours: 24
    # 最大过期时间（小时）
    max-expire-hours: 720
    # 是否启用密码保护
    password-protection: true

# 定时任务配置
scheduling:
  enabled: true
  # Cron表达式
  cleanup-temp-files: 0 0 2 * * ?
  calculate-storage-usage: 0 0 3 * * ?
  rebuild-document-index: 0 0 1 ? * SUN
  optimize-search-index: 0 0 4 * * ?
  cleanup-expired-documents: 0 0 5 * * ?
  cleanup-operation-logs: 0 0 6 1 * ? 